<h1>{{ node_type }}: {{ node.name }}</h1>

<form onsubmit="return confirm('Do you really want to delete?');" action="{% url 'stokosm:detail' node_id=node.id node_type=node_type %}" method="post">
{% csrf_token %}
<label>Delete {{ node_type }}? <input type="submit" name="delete" value="delete"></label>
</form>

<br>

<form action="{% url 'stokosm:edit' node_id=node.id node_type=node_type %}" method="get">
{% csrf_token %}
<input type="submit" name="edit" value="Edit">
</form>

<h4>Add related {{ node_type }}</h4>

<!--GOAL-->
{% if node_type == "goal" %}
<form action="{% url 'stokosm:detail' node_id=node.id node_type=node_type %}" method="post">
{% csrf_token %}
{{ connections_form }}
<input type="submit" name="add_connected_goal" value="Submit" />

</form>

<h3>Related goals</h3>
<ul>
{% for connection in node.goal.connections.all %}
	<li><a href="{% url 'stokosm:connection_detail' connection_id=connection.id %}">{{ connection.goal2.name }}</a></li>
{% endfor %}
</ul>

<h3>Linked projects</h3>

<h4>Add linked project</h4>

<form action="{% url 'stokosm:detail' node_id=node.id node_type=node_type %}" method="post">
{% csrf_token %}
{{ linked_projects_form }}
<input type="submit" name="add_linked_project" value="Submit" />

</form>

<ul>
{% for link in node.goal.links.all %}
	<li><a href="{% url 'stokosm:link_detail' link_id=link.id %}">{{ link.project.name }}</a></li>
{% endfor %}
</ul>

<!--REQUIREMENT-->
{% elif node_type == "requirement" %}
<form action="{% url 'stokosm:detail' node_id=node.id node_type=node_type %}" method="post">
{% csrf_token %}
{{ form }}
<input type="submit" value="Submit" />

</form>

<h3>Related requirements</h3>
<ul>
{% for connection in node.requirement.connections.all %}
	<li><a href="{% url 'stokosm:connection_detail' connection_id=connection.id %}">{{ connection.requirement2.name }}</a></li>
{% endfor %}
</ul>

<h3>Linked projects</h3>

<h4>Add linked project</h4>

<form action="{% url 'stokosm:detail' node_id=node.id node_type=node_type %}" method="post">
{% csrf_token %}
{{ linked_projects_form }}
<input type="submit" name="add_linked_project" value="Submit" />

</form>

<ul>
{% for link in node.requirement.links.all %}
	<li><a href="{% url 'stokosm:link_detail' link_id=link.id %}">{{ link.project.name }}</a></li>
{% endfor %}
</ul>

<!--PROJECT-->
{% elif node_type == "project" %}
<form action="{% url 'stokosm:detail' node_id=node.id node_type=node_type %}" method="post">
{% csrf_token %}
{{ connections_form }}
<input type="submit" name="add_connected_project" value="Submit" />

</form>

<h3>Related projects</h3>
<ul>
{% for connection in node.project.connections.all %}
	<li><a href="{% url 'stokosm:connection_detail' connection_id=connection.id %}">{{ connection.project2.name }}</a></li>
{% endfor %}
</ul>

<h3>Linked goals</h3>

<h4>Add linked goal</h4>

<form action="{% url 'stokosm:detail' node_id=node.id node_type=node_type %}" method="post">
{% csrf_token %}
{{ linked_goals_form }}
<input type="submit" name="add_linked_goal" value="Submit" />

</form>

<ul>
{% for link in node.project.links.all %}
	<li><a href="{% url 'stokosm:link_detail' link_id=link.id %}">{{ link.goal.name }}</a></li>
{% endfor %}
</ul>

<h3>Linked requirements</h3>

<h4>Add linked requirement</h4>

<form action="{% url 'stokosm:detail' node_id=node.id node_type=node_type %}" method="post">
{% csrf_token %}
{{ linked_requirements_form }}
<input type="submit" name="add_linked_requirement" value="Submit" />

</form>

<ul>
{% for link in node.project.links.all %}
	<li><a href="{% url 'stokosm:link_detail' link_id=link.id %}">{{ link.requirement.name }}</a></li>
{% endfor %}
</ul>

{% endif %}